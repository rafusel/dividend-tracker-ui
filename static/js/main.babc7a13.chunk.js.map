{"version":3,"sources":["components/LoginPage/styles.module.css","components/NavBar/styles.module.css","components/Home/styles.module.css","components/Dashboard/styles.module.css","assets/wealthsimple-pink.png","components/Dashboard/DashboardCard/styles.module.css","redux/reducers.js","redux/selectors.js","components/Home/index.jsx","redux/axiosHelpers.js","components/LoginPage/index.jsx","components/NavBar/index.jsx","components/Dashboard/DashboardCard/index.jsx","components/Dashboard/index.jsx","components/Logout/index.jsx","components/App/index.jsx","redux/actions.js","index.js"],"names":["module","exports","dividendApp","combineReducers","dividends","state","action","type","getTotalDividends","getDividends","reduce","accum","currVal","market_value","amount","Home","props","isAuthenticated","to","className","styles","fullPage","title","axiosBaseURL","LoginPage","login","e","preventDefault","axios","post","loginInfo","then","res","data","tokens","userData","setAuthentication","first_name","sessionStorage","setItem","access","refresh","error","alert","password","setState","handleChange","name","target","value","email","this","loginForm","onSubmit","formContent","placeholder","onChange","submitWrapper","React","Component","NavBar","navBar","navBarWrapper","logo","src","Logo","alt","navBarLinkWrapper","Fragment","DashboardCard","dashboardCard","label","Dashboard","projectDividend","position","ticker","stock","symbol","replace","numberOfShares","quantity","currentDividendValue","dividend","totalProjectedDividend","projectedDividend","parseDate","givenDateAsString","year","parseInt","substring","month","day","isDateWithinPastYear","givenDate","todayDate","Date","today","getFullYear","getMonth","getDate","getDividendIncome","activities","filter","activity","object","process_date","total","sendHistoryRequest","account","accountID","id","results","currentEquityValue","length","equity_value","totalEquityValue","allActivities","dividendsWithinPastYear","forEach","estimatedYield","dashboardWrapper","userName","dashboardCards","toFixed","Logout","logout","App","firstName","clear","isLoaded","getItem","accessToken","refreshToken","basename","path","exact","connect","totalDividends","dispatch","setDividendsInStore","setDividends","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.babc7a13.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"fullPage\":\"styles_fullPage__2OXOy\",\"loginForm\":\"styles_loginForm__Ib4R2\",\"formContent\":\"styles_formContent__1KWL2\",\"submitWrapper\":\"styles_submitWrapper__19puO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navBar\":\"styles_navBar__3iC_i\",\"navBarWrapper\":\"styles_navBarWrapper__2P72d\",\"logo\":\"styles_logo__KwPl6\",\"navBarLinkWrapper\":\"styles_navBarLinkWrapper__2JXNY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fullPage\":\"styles_fullPage__39EEN\",\"title\":\"styles_title__1IvRM\",\"homePageWrapper\":\"styles_homePageWrapper__1fsE1\",\"white\":\"styles_white__20Y93\",\"pink\":\"styles_pink__2IF0a\",\"image\":\"styles_image__2Wmaw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dashboardCards\":\"styles_dashboardCards__3Xhnm\",\"dashboardWrapper\":\"styles_dashboardWrapper__d1KFN\"};","module.exports = __webpack_public_path__ + \"static/media/wealthsimple-pink.0c226a4a.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dashboardCard\":\"styles_dashboardCard__MenSt\"};","import { combineReducers } from 'redux';\r\n\r\nexport const SET_DIVIDENDS = 'SET_DIVIDENDS';\r\n\r\n\r\nfunction dividends(state = [], action) {\r\n  switch (action.type) {\r\n    case SET_DIVIDENDS:\r\n      return action.dividends;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst dividendApp = combineReducers({\r\n  dividends,\r\n});\r\n\r\nexport default dividendApp;\r\n","export const getDividends = state => state.dividends;\r\n\r\nexport const getTotalDividends = state => getDividends(state)\r\n  .reduce((accum, currVal) => (accum + currVal.market_value.amount), 0)","import React from 'react';\r\nimport styles from './styles.module.css';\r\nimport { Redirect, Link } from 'react-router-dom';\r\n\r\nexport default function Home(props) {\r\n  return !props.isAuthenticated\r\n    ? (\r\n      <div className={styles.fullPage}>\r\n        <div className={styles.title}>\r\n          <h1>\r\n            A Wealthsimple Trade Dividend Tracker\r\n          </h1>\r\n          <p>\r\n            Keep scrolling for more details\r\n          </p>\r\n        </div>\r\n        <div className={styles.fullPage}>\r\n          <h2>\r\n            Tired of using a spreadsheet to track your portfolio?\r\n          </h2>\r\n          <p>\r\n            If you've ever tried making a spreadsheet to track your portfolio and its dividends\r\n            using Google Sheets or Excel, you're probably aware it can be unmaintainable and unreliable.\r\n          </p>\r\n          <p>\r\n            Wealthsimple Trade users are often attracted to the platform for the\r\n            $0 commission on trades, and the user-friendly interface. Users are\r\n            willing to accept that the analytics provided by the platform (particularly\r\n            for dividend growth investors) are lacking.\r\n          </p>\r\n          <p>\r\n            Now you can have the best of both worlds! Buy and sell with Wealthsimple Trade, and use this tracker\r\n            for complete and automatic analytics.\r\n          </p>\r\n          <Link to=\"/login\">\r\n            Stop Using Spreadsheets Now\r\n          </Link>\r\n          <h2>\r\n            An automatic dividend tracker\r\n          </h2>\r\n          <p>\r\n            By logging in with your Wealthsimple credentials you will have access to automatic dividend tracking\r\n            on all your holdings. You will have access to metrics such as dividend income over time, estimated\r\n            dividend yield for your entire portfolio, and for each individual holding.\r\n          </p>\r\n          <p>\r\n            In addition to dividend analytics, this tracker provides annual analytics tracking your portfolios\r\n            average interest year over year, so you can be sure that your investments are performing as expected.\r\n          </p>\r\n          <Link to=\"/login\">\r\n            Start Tracking Now\r\n          </Link>\r\n          <h2>\r\n            Fully mobile and desktop compatible\r\n          </h2>\r\n          <p>\r\n            Besides the lack of dividend analytics, one of the few drawbacks of Wealthsimple Trade is its lack of desktop\r\n            compatibility. This application is fully available through any web browser, and is fully responsive for a\r\n            fluid mobile and desktop experience.\r\n          </p>\r\n          <p>\r\n            If you were so inclined, this dividend tracker could serve a your one stop shop for portfolio tracking.\r\n          </p>\r\n          <Link to=\"/login\">\r\n            Log In\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    ) : (\r\n      <Redirect to='/dashboard' />\r\n    )\r\n}\r\n","export const axiosBaseURL = (\r\n  !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\r\n    ? 'http://localhost:5000'\r\n    : 'https://wealthsimple-trade-dividends.herokuapp.com'\r\n);\r\n\r\n","import React from 'react';\r\nimport styles from './styles.module.css';\r\nimport axios from 'axios'\r\nimport { Redirect } from 'react-router-dom';\r\nimport { axiosBaseURL } from '../../redux/axiosHelpers';\r\n\r\nexport default class LoginPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loginInfo: {\r\n        email: '',\r\n        password: '',\r\n      },\r\n    };\r\n  }\r\n\r\n  login = (e) => {\r\n    e.preventDefault();\r\n    axios.post(`${axiosBaseURL}/api/v1/login`, this.state.loginInfo)\r\n    .then(res => {\r\n      const { tokens, userData } = res.data;\r\n      this.props.setAuthentication(tokens, userData.first_name);\r\n      sessionStorage.setItem('isAuthenticated', 'true');\r\n      sessionStorage.setItem('accessToken', tokens.access);\r\n      sessionStorage.setItem('refreshToken', tokens.refresh);\r\n      sessionStorage.setItem('firstName', userData.first_name);\r\n    }, (error) => {\r\n      alert('Login unsuccessful');\r\n      const loginInfo = this.state.loginInfo;\r\n      loginInfo.password = '';\r\n      this.setState({\r\n        loginInfo: loginInfo,\r\n      });\r\n    });\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n    const loginInfo = this.state.loginInfo;\r\n    loginInfo[name] = value;\r\n    this.setState({\r\n      loginInfo: loginInfo\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.isAuthenticated) {\r\n      return (\r\n        <div className={styles.fullPage}>\r\n          <h1>Log In</h1>\r\n          <p>Please use your Wealthsimple Trade credentials.</p>\r\n          <form className={styles.loginForm} onSubmit={this.login}>\r\n            <div className={styles.formContent}>\r\n              <input\r\n                type=\"email\"\r\n                name=\"email\"\r\n                placeholder=\"Email address\"\r\n                value={this.state.loginInfo.email}\r\n                onChange={this.handleChange}\r\n              />\r\n              <br />\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                placeholder=\"Password\"\r\n                value={this.state.loginInfo.password}\r\n                onChange={this.handleChange}\r\n              />\r\n              <div className={styles.submitWrapper}>\r\n                <input type=\"submit\" value=\"Sign In\" />\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      );\r\n    }\r\n    return <Redirect to='/dashboard' />;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Logo from '../../assets/wealthsimple-pink.png';\r\nimport styles from './styles.module.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function NavBar(props) {\r\n  return (\r\n      <nav className={styles.navBar}>\r\n        <div className={styles.navBarWrapper}>\r\n          <span>\r\n            <Link to=\"/\">\r\n              <img\r\n                className={styles.logo}\r\n                src={Logo}\r\n                alt=\"Wealthsimple Pink Logo\"\r\n              />\r\n            </Link>\r\n          </span>\r\n          <div className={styles.navBarLinkWrapper}>\r\n            {\r\n              props.isAuthenticated\r\n                ? (\r\n                  <React.Fragment>\r\n                    <Link to=\"/dashboard\" >\r\n                      <span>\r\n                        Dashboard\r\n                      </span>\r\n                    </Link>\r\n                    &nbsp;|&nbsp;\r\n                    <Link to=\"/logout\" >\r\n                      <span>\r\n                        Logout\r\n                      </span>\r\n                    </Link>\r\n                  </React.Fragment>\r\n                ) : (\r\n                  <React.Fragment>\r\n                    <Link to=\"/\">\r\n                      <span>\r\n                        Home\r\n                      </span>\r\n                    </Link>\r\n                    &nbsp;|&nbsp;\r\n                    <Link to=\"/login\">\r\n                      <span>\r\n                        Log In\r\n                      </span>\r\n                    </Link>\r\n                  </React.Fragment>\r\n                )\r\n            }\r\n          </div>\r\n        </div>\r\n      </nav>\r\n  );\r\n}","import React from 'react';\r\nimport styles from './styles.module.css';\r\n\r\nexport default function DashboardCard(props) {\r\n  return (\r\n    <div className={styles.dashboardCard}>\r\n      <h1>\r\n        {props.label}\r\n      </h1>\r\n      <p>\r\n        {props.value}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { axiosBaseURL } from '../../redux/axiosHelpers';\r\nimport DashboardCard from './DashboardCard/index';\r\nimport styles from './styles.module.css';\r\n\r\nexport default class Dashboard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      allActivities: [],\r\n      dividendsWithinPastYear: 0,\r\n      totalEquityValue: 0,\r\n      projectedDividend: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.isAuthenticated) {\r\n      axios.post(`${axiosBaseURL}/api/v1/activities`, this.props.tokens)\r\n      .then((res) => {\r\n        const activities = res.data.activities;\r\n        this.setState({\r\n          allActivities: activities,\r\n          dividendsWithinPastYear: this.getDividendIncome(activities),\r\n        })\r\n      });\r\n\r\n      axios.post(`${axiosBaseURL}/api/v1/accounts`, this.props.tokens)\r\n      .then((res) => {\r\n        const accounts = res.data.results;\r\n        accounts.forEach(this.sendHistoryRequest);\r\n      });\r\n\r\n      axios.post(`${axiosBaseURL}/api/v1/positions`, this.props.tokens)\r\n      .then(res => {\r\n        const positions = res.data.results;\r\n        positions.forEach(this.projectDividend)\r\n      });\r\n    }\r\n  }\r\n\r\n  projectDividend = (position) => {\r\n    const ticker = position.stock.symbol.replace('.', '-');\r\n    const numberOfShares = position.quantity;\r\n    axios.post(`${axiosBaseURL}/api/v1/yield`, { ticker })\r\n    .then(res => {\r\n      const currentDividendValue = res.data.dividend * numberOfShares;\r\n      const totalProjectedDividend = this.state.projectedDividend;\r\n      this.setState({\r\n        projectedDividend: currentDividendValue + totalProjectedDividend,\r\n      });\r\n    });\r\n  }\r\n\r\n  parseDate = (givenDateAsString) => {\r\n    const year = parseInt(givenDateAsString.substring(0, 4));\r\n    const month = parseInt(givenDateAsString.substring(5, 7));\r\n    const day = parseInt(givenDateAsString.substring(8, 10));\r\n    return {\r\n      day,\r\n      month,\r\n      year,\r\n    };\r\n  }\r\n\r\n  isDateWithinPastYear = (givenDate) => {\r\n    const todayDate = new Date();\r\n    const today = {\r\n      year: todayDate.getFullYear(),\r\n      month: todayDate.getMonth() + 1,\r\n      day: todayDate.getDate(),\r\n    };\r\n    if (today.year > givenDate.year) return true;\r\n    if (today.year === givenDate.year) {\r\n      if (today.month > givenDate.month) return true;\r\n      if (today.month === givenDate.month) {\r\n        if (today.day >= givenDate.day) return true;\r\n      }\r\n    }\r\n    return false\r\n  };\r\n\r\n  getDividendIncome = (activities) => {\r\n    const dividendsWithinPastYear = activities.filter((activity) => (\r\n      activity.object === 'dividend'\r\n        && this.isDateWithinPastYear(this.parseDate(activity.process_date))\r\n    ));\r\n    const sumDividends = dividendsWithinPastYear.reduce((total, dividend) => (\r\n      total + dividend.market_value.amount\r\n    ), 0);\r\n    return sumDividends;\r\n  }\r\n\r\n  sendHistoryRequest = (account) => {\r\n    axios.post(`${axiosBaseURL}/api/v1/history`, {\r\n      tokens: this.props.tokens,\r\n      accountID: account.id,\r\n    }).then((res) => {\r\n      const results = res.data.results;\r\n      const currentEquityValue = results[results.length - 1].equity_value.amount;\r\n      const totalEquityValue = this.state.totalEquityValue;\r\n      this.setState({\r\n        totalEquityValue: currentEquityValue + totalEquityValue,\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      dividendsWithinPastYear,\r\n      projectedDividend,\r\n      totalEquityValue,\r\n    } = this.state\r\n    const estimatedYield = (projectedDividend / totalEquityValue) * 100;\r\n    return (\r\n      this.props.isAuthenticated ? (\r\n        <div className={styles.dashboardWrapper}>\r\n          <h1>\r\n            Welcome to your dashboard, {this.props.userName}\r\n          </h1>\r\n          <div className={styles.dashboardCards}>\r\n            <DashboardCard\r\n              label=\"Dividend Income in the Past Year\"\r\n              value={`$${dividendsWithinPastYear.toFixed(2)}`}\r\n            />\r\n            <DashboardCard\r\n              label=\"Estimated Current Yearly Dividend Income\"\r\n              value={`$${projectedDividend.toFixed(2)}`}\r\n            />\r\n            <DashboardCard\r\n              label=\"Estimated Current Dividend Yield\"\r\n              value={`${estimatedYield.toFixed(2)}%`}\r\n            />\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <Redirect to='/login' />\r\n      )\r\n    );\r\n  }\r\n\r\n}\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nexport default class Logout extends React.Component {\r\n  componentDidMount() {\r\n    this.props.logout();\r\n  }\r\n\r\n  render() {\r\n    return <Redirect to=\"/login\" />\r\n  }\r\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport { setDividends } from '../../redux/actions';\nimport { getTotalDividends } from '../../redux/selectors';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom';\nimport Home from '../Home/index';\nimport './index.css';\nimport LoginPage from '../LoginPage/index';\nimport NavBar from '../NavBar/index';\nimport Dashboard from '../Dashboard/index';\nimport Logout from '../Logout/index';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      isAuthenticated: false,\n      tokens: {\n        access: '',\n        refresh: '',\n      },\n      firstName: '',\n    }\n  }\n\n  componentDidMount() {\n    const isAuthenticated = sessionStorage.getItem('isAuthenticated') === 'true';\n    const accessToken = sessionStorage.getItem('accessToken');\n    const refreshToken = sessionStorage.getItem('refreshToken');\n    const firstName = sessionStorage.getItem('firstName');\n    if (isAuthenticated && accessToken && refreshToken && firstName) {\n      this.setState({\n        isAuthenticated,\n        tokens: {\n          access: accessToken,\n          refresh: refreshToken,\n        },\n        firstName,\n      });\n    }\n    this.setState({ isLoaded: true });\n  }\n\n  setAuthentication = (tokens, firstName) => {\n    this.setState({\n      isAuthenticated: true,\n      tokens,\n      firstName,\n    });\n  }\n\n  logout = () => {\n    sessionStorage.clear();\n    this.setState({\n      isLoaded: false,\n      isAuthenticated: false,\n      tokens: {\n        access: '',\n        refresh: '',\n      },\n      firstName: '',\n    });\n  }\n\n  render() {\n    return (\n      <Router basename=\"/dividend-tracker-ui/\">\n        <NavBar\n          isAuthenticated={this.state.isAuthenticated}\n        />\n        <Switch>\n          <Route path=\"/login\">\n            <LoginPage\n              isAuthenticated={this.state.isAuthenticated}\n              setAuthentication={this.setAuthentication}\n            />\n          </Route>\n          <Route path=\"/dashboard\">\n            <Dashboard\n              isAuthenticated={this.state.isAuthenticated}\n              tokens={this.state.tokens}\n              userName={this.state.firstName}\n            />\n          </Route>\n          <Route path=\"/logout\">\n            <Logout\n              logout={this.logout}\n            />\n          </Route>\n          <Route exact path=\"/\">\n            <Home\n              isAuthenticated={this.state.isAuthenticated}\n            />\n          </Route>\n        </Switch>\n      </Router>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  totalDividends: getTotalDividends(state),\n});\n\nconst mapActionsToProps = (dispatch) => {\n  return {\n    setDividendsInStore: dividends => {\n      dispatch(setDividends(dividends));\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapActionsToProps)(App);\n","import {SET_DIVIDENDS} from './reducers';\r\n\r\nexport function setDividends(dividends) {\r\n  return { type: SET_DIVIDENDS, dividends};\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/index';\nimport { createStore } from 'redux';\nimport dividendApp from './redux/reducers';\nimport { Provider } from 'react-redux';\n\nconst store = createStore(\n  dividendApp, \n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nReactDOM.render(\n  <React.StrictMode>\n  <Provider store={store}>\n    <App />\n  </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}